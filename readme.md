# <img src="https://cloud.githubusercontent.com/assets/7833470/10899314/63829980-8188-11e5-8cdd-4ded5bcb6e36.png" height="60"> Angular Auth Challenges

Challenges for <a href="https://github.com/sf-wdi-24/modules/tree/master/week-11-front-end-frameworks-and-mobile/day-01/module-01" target="">Angular Auth</a> lesson.

**Objective:** Implement Angular authentication with Satellizer. Your goal is to have working sign up and log in functionality.

**You should be pair programming the entire time you work on these challenges. That means you're using ONE computer at a time, and ONLY the "driver" is allowed to type (you'll switch roles throughout the lab).**

> <a href="https://github.com/sahat/satellizer#authloginuser-options" target="">Satellizer Docs</a>

## App Setup

1. Whoever is going to be the "driver" first should fork this repo, and clone it into their `develop` folder on their local machine. The "navigator" must close their computer.

2. Once you're in your app directory, run `npm install` to install the required `node_modules`.

3. In one Terminal window, run `mongod`, and in another, run `nodemon`.

4. Navigate to `localhost:3000` in the browser. You should see an empty page and an angry red error message in the Chrome console.

5. **BEFORE WRITING ANY CODE**, open up `models/user.js`, `resources/auth.js`, and `server.js`. The driver should go through these files in order and explain what you think each code block and/or function does.

6. Now it's the navigator's turn to explain code! Open up `index.hbs` and `app.js`, and go through the same exercise.

7. Next, the driver should add a `.env` file to the root directory. Add this line:

  ```
  TOKEN_SECRET=supersecrettoken
  ```

  This is the secret your server will use to encode the JWT token for each user.

8. Before hooking up the front-end, test your server routes via Postman:
  * Send a `GET` request to `/api/me`. You should see the message: "Please make sure your request has an Authorization header."
  * Send a `POST` request to `/auth/signup` with a test `email` and `password`. You should see a token that was generated by the server.
  * Send a `POST` request to `/auth/login` with the `email` and `password` you just used to create a new user. You should again see a token that was generated by the server.

## Satellizer

1. At this point, the "driver" should add the "navigator" as a collaborator on their forked version of the repo. No need to commit anything yet, since you haven't written any code. It's time to switch drivers! The new driver should clone their partner's forked version of the repo into their develop folder. The new navigator must close their computer.

2. Now it's time to implement authentication from the client. First you need to include Satellizer in your Angular app:
  * Add the Satellizer CDN to `index.hbs`.
  * Add the Satellizer module to your Angular app in `app.js`.
  * Check that you can navigate between your routes (`/`, `/signup`, `/login`, and `/profile`).

3. Starting on line 35 of `app.js`, start following the instructions in comments to implement authentication with Satellizer. The current driver should implement `$scope.isAuthenticated` and `$scope.logout`.

4. Refresh `localhost:3000` in the browser. At this point, you should see in the Chrome developer tools that your browser is making a request to `/api/me`. Click the "Log Out" link and make sure it redirects to `/login`.

5. The current driver should add and commit their changes, and push their work up to GitHub. Switch drivers.

6. The new driver should pick up where their partner left off by implementing the functionality outlined in the `AuthCtrl` and the `ProfileCtrl`.

7. At this point, you should be able to sign up a user, log them in, and view their profile page from the client.
